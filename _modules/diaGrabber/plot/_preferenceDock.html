

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>diaGrabber.plot._preferenceDock &mdash; diaGrabber 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="diaGrabber 0.1.1 documentation" href="../../../index.html" />
    <link rel="up" title="diaGrabber" href="../../diaGrabber.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">diaGrabber 0.1.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../diaGrabber.html" accesskey="U">diaGrabber</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for diaGrabber.plot._preferenceDock</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 *-*</span>
<span class="kn">from</span> <span class="nn">diaGrabber</span> <span class="kn">import</span> <span class="n">_utils</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

<span class="kn">import</span> <span class="nn">pyqtgraph.parametertree.parameterTypes</span> <span class="kn">as</span> <span class="nn">pTypes</span>
<span class="kn">from</span> <span class="nn">pyqtgraph.parametertree</span> <span class="kn">import</span> <span class="n">Parameter</span><span class="p">,</span> <span class="n">ParameterTree</span><span class="p">,</span> <span class="n">ParameterItem</span><span class="p">,</span> <span class="n">registerParameterType</span>
<span class="kn">import</span> <span class="nn">pyqtgraph.dockarea</span> <span class="kn">as</span> <span class="nn">pgDock</span>
<span class="kn">from</span> <span class="nn">pyqtgraph.Qt</span> <span class="kn">import</span> <span class="n">QtGui</span>
<span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="kn">import</span> <span class="n">ViewBox</span>
<span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="kn">import</span> <span class="n">LineSegmentROI</span><span class="p">,</span> <span class="n">AxisItem</span>


<div class="viewcode-block" id="preferenceDock"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceDock">[docs]</a><span class="k">class</span> <span class="nc">preferenceDock</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotClass</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span> <span class="o">=</span> <span class="n">plotClass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">exist</span> <span class="o">=</span> <span class="bp">False</span>


<div class="viewcode-block" id="preferenceDock.build"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceDock.build">[docs]</a>	<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">preferences_size</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">exist</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">preferences_size</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">tab</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">()</span><span class="c">#TabWidget()</span>
		<span class="c">#build main tab</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">main</span> <span class="o">=</span> <span class="n">mainTab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
		<span class="c">#add main tab to tab-instance</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="p">,</span> <span class="s">&#39;Main&#39;</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">display_list</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">addPrefTab</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
		<span class="c">#create new dock</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pref_dock</span> <span class="o">=</span> <span class="n">pgDock</span><span class="o">.</span><span class="n">Dock</span><span class="p">(</span><span class="s">&quot;Preferences&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
		<span class="c">#add tab-instance to dock</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pref_dock</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab</span><span class="p">)</span>
		<span class="c">#add dock to area</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">addToArea</span><span class="p">()</span>
		<span class="c">#autosave</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">saveWidgetLayout</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="preferenceDock.createNewDisplay"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceDock.createNewDisplay">[docs]</a>	<span class="k">def</span> <span class="nf">createNewDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">_createNewDisplay</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">addPrefTab</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">addToArea</span><span class="p">()</span>
		<span class="c">#autosave</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">saveWidgetLayout</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="preferenceDock.addPrefTab"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceDock.addPrefTab">[docs]</a>	<span class="k">def</span> <span class="nf">addPrefTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">display</span><span class="p">):</span>
		<span class="c">#add a tab owned by its display</span>
		<span class="n">display</span><span class="o">.</span><span class="n">prefTab</span> <span class="o">=</span> <span class="n">preferenceTab</span><span class="p">(</span><span class="n">display</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">display</span><span class="o">.</span><span class="n">prefTab</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">display</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>

</div>
<div class="viewcode-block" id="preferenceDock.removeTab"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceDock.removeTab">[docs]</a>	<span class="k">def</span> <span class="nf">removeTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tab</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="n">tab</span><span class="p">))</span>
		<span class="c">#autosave</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="n">saveWidgetLayout</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="preferenceDock.addToArea"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceDock.addToArea">[docs]</a>	<span class="k">def</span> <span class="nf">addToArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">##append parameterTree-instance to dockarea</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">area</span><span class="o">.</span><span class="n">addDock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pref_dock</span><span class="p">,</span> <span class="s">&#39;left&#39;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pref_dock</span><span class="o">.</span><span class="n">setStretch</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>


</div></div>
<div class="viewcode-block" id="mainTab"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.mainTab">[docs]</a><span class="k">class</span> <span class="nc">mainTab</span><span class="p">(</span><span class="n">ParameterTree</span><span class="p">):</span>
	
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefDock</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span> <span class="o">=</span> <span class="n">prefDock</span><span class="o">.</span><span class="n">plotClass</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">mainTab</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>

		<span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Add widget&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;action&#39;</span><span class="p">})</span>
		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;group&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="p">[</span>
				<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Save&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;action&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="p">[</span>
					<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Save to file&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span>
					<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Filename&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;preferences/my_widget_layout&#39;</span><span class="p">},</span>
				<span class="p">]},</span>
				<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Restore&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;action&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="p">[</span>
					<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Restore from file&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">},</span>
					<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Filename&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;preferences/my_widget_layout&#39;</span><span class="p">},</span>
				<span class="p">]},</span>
			<span class="p">]})</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">interactive</span><span class="p">:</span>
			<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
				<span class="n">readoutPlotRates</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Readout/Plot-Rates&#39;</span><span class="p">))</span>
				
		<span class="c">## Create tree of Parameter objects</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">=</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;params&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;group&#39;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Add widget&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">prefDock</span><span class="o">.</span><span class="n">createNewDisplay</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;Save&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saveWidgetLayout</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;Restore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">restoreWidgetLayout</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">showTop</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<div class="viewcode-block" id="mainTab.saveWidgetLayout"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.mainTab.saveWidgetLayout">[docs]</a>	<span class="k">def</span> <span class="nf">saveWidgetLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#global stateWidgetLayout</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">stateWidgetLayout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">area</span><span class="o">.</span><span class="n">saveState</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;Save&#39;</span><span class="p">,</span> <span class="s">&#39;Save to file&#39;</span><span class="p">]:</span>
			<span class="c">#write state to file</span>
			<span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;Save&#39;</span><span class="p">,</span> <span class="s">&#39;Filename&#39;</span><span class="p">]</span>
			<span class="n">_utils</span><span class="o">.</span><span class="n">prepareFileSystem</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
			<span class="n">saveWidgetFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
			<span class="n">saveWidgetFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stateWidgetLayout</span><span class="p">))</span>
			<span class="n">saveWidgetFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="mainTab.restoreWidgetLayout"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.mainTab.restoreWidgetLayout">[docs]</a>	<span class="k">def</span> <span class="nf">restoreWidgetLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#global stateWidgetLayout</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;Restore&#39;</span><span class="p">,</span> <span class="s">&#39;Restore from file&#39;</span><span class="p">]:</span>
			<span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s">&#39;Save/Restore widget-layout&#39;</span><span class="p">,</span> <span class="s">&#39;Restore&#39;</span><span class="p">,</span> <span class="s">&#39;Filename&#39;</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">stateWidgetLayout</span> <span class="o">=</span> <span class="n">saveWidgetFile</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">area</span><span class="o">.</span><span class="n">restoreState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stateWidgetLayout</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="preferenceTab"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceTab">[docs]</a><span class="k">class</span> <span class="nc">preferenceTab</span><span class="p">(</span><span class="n">ParameterTree</span><span class="p">):</span>
	<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">	the preference tab that belongs to each Display</span>
<span class="sd">	&#39;&#39;&#39;</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">display</span><span class="p">,</span> <span class="n">prefDock</span><span class="p">):</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span> <span class="o">=</span> <span class="n">prefDock</span><span class="o">.</span><span class="n">plotClass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefDock</span> <span class="o">=</span> <span class="n">prefDock</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">display</span>
		
		<span class="nb">super</span><span class="p">(</span><span class="n">preferenceTab</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
		<span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">params</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Remove widget&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;action&#39;</span><span class="p">})</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">plot_merge_dims</span> <span class="o">=</span> <span class="n">plotMergeDims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Plot merge-dimensions&#39;</span><span class="p">)</span>
		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_merge_dims</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">slice_image</span> <span class="o">=</span> <span class="n">sliceImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Slice Image&#39;</span><span class="p">)</span>
		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slice_image</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">plot_basis_dims</span> <span class="o">=</span> <span class="n">plotBasisDims</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Plot basis-dimensions&#39;</span><span class="p">)</span>
		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_basis_dims</span><span class="p">)</span>

		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
			<span class="n">viewOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;View Options&#39;</span><span class="p">))</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">save_restore</span> <span class="o">=</span> <span class="n">saveRestorePrefs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Save/Restore preferences&#39;</span><span class="p">)</span>

		<span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_restore</span><span class="p">)</span>

		<span class="c">## Create tree of Parameter objects</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">p</span> <span class="o">=</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;params&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;group&#39;</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Remove widget&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">sigTreeStateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">printChange</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">showTop</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

			<span class="c">#autosave</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">statePreferences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">saveState</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">showTabOnClick</span><span class="p">()</span>

	<span class="c">## If anything changes in the tree, print a message</span>
<div class="viewcode-block" id="preferenceTab.printChange"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceTab.printChange">[docs]</a>	<span class="k">def</span> <span class="nf">printChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">changes</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="s">&quot;tree changes:&quot;</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">change</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
			<span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">childPath</span><span class="p">(</span><span class="n">param</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
				<span class="n">childName</span> <span class="o">=</span> <span class="s">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">childName</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&#39;  parameter: </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span> <span class="n">childName</span><span class="p">)</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&#39;  change:	</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span> <span class="n">change</span><span class="p">)</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&#39;  data:	  </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
			<span class="k">print</span><span class="p">(</span><span class="s">&#39;  ----------&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="preferenceTab.remove"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceTab.remove">[docs]</a>	<span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotClass</span><span class="o">.</span><span class="n">_removeDisplay</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="preferenceTab.showTabOnClick"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.preferenceTab.showTabOnClick">[docs]</a>	<span class="k">def</span> <span class="nf">showTabOnClick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">def</span> <span class="nf">newMouseClickEvent</span><span class="p">(</span><span class="n">ev</span><span class="p">):</span>
			<span class="sd">&#39;&#39;&#39;add to normal mouseClickEvent the feature</span>
<span class="sd">			to show the corresponding prefTab when clicking on the display&#39;&#39;&#39;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
			<span class="n">ViewBox</span><span class="o">.</span><span class="n">mouseClickEvent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">vb</span><span class="p">,</span> <span class="n">ev</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">mouseClickEvent</span> <span class="o">=</span> <span class="n">newMouseClickEvent</span>

</div></div>
<div class="viewcode-block" id="saveRestorePrefs"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.saveRestorePrefs">[docs]</a><span class="k">class</span> <span class="nc">saveRestorePrefs</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">prefTab</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span><span class="c">#</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span> <span class="o">=</span> <span class="n">prefTab</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;group&#39;</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;children&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
				<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Save&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;action&#39;</span><span class="p">},</span>
				<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Restore&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;action&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="p">[</span>
					<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Add missing items&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
					<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Remove extra items&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
				<span class="p">]},</span>
			<span class="p">]</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>

		<span class="c">##SAVE PREFERENCES</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Save&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">savePreferences</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Restore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigActivated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">restorePreferences</span><span class="p">)</span>

<div class="viewcode-block" id="saveRestorePrefs.savePreferences"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.saveRestorePrefs.savePreferences">[docs]</a>	<span class="k">def</span> <span class="nf">savePreferences</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#global statePreferences</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">statePreferences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">saveState</span><span class="p">()</span>
		</div>
<div class="viewcode-block" id="saveRestorePrefs.restorePreferences"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.saveRestorePrefs.restorePreferences">[docs]</a>	<span class="k">def</span> <span class="nf">restorePreferences</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sgn</span><span class="p">,</span><span class="n">state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span><span class="n">add_missing_remove_extra</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="k">print</span> <span class="n">state</span><span class="p">,</span><span class="mi">888</span>
		<span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
			<span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">statePreferences</span>
		<span class="k">if</span> <span class="n">add_missing_remove_extra</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
		<span class="c">#global statePreferences</span>
			<span class="n">add</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Restore&#39;</span><span class="p">,</span> <span class="s">&#39;Add missing items&#39;</span><span class="p">)</span>
			<span class="n">rem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="s">&#39;Restore&#39;</span><span class="p">,</span> <span class="s">&#39;Remove extra items&#39;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">add</span><span class="p">,</span><span class="n">rem</span> <span class="o">=</span> <span class="n">add_missing_remove_extra</span><span class="p">,</span><span class="n">add_missing_remove_extra</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">restoreState</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">addChildren</span><span class="o">=</span><span class="n">add</span><span class="p">,</span> <span class="n">removeChildren</span><span class="o">=</span><span class="n">rem</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="plotBasisDims"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims">[docs]</a><span class="k">class</span> <span class="nc">plotBasisDims</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">prefTab</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span><span class="c">#</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">display</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span> <span class="o">=</span> <span class="n">prefTab</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">concBasisDict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c">#basis_index, concBasis-instance</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bool&#39;</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">basis_opt</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
			<span class="n">plot_basis</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">_basisIndex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">basis_opt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="n">plot_basis</span><span class="p">}))</span>
			<span class="k">if</span> <span class="n">plot_basis</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">addPlotRange</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">addConcentrateOpt</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotStatus</span><span class="p">)</span>
		<span class="c">#self.plot_types = self.addChild({&#39;name&#39;: &#39;Available Plot-Types&#39;, &#39;type&#39;: &#39;group&#39;})</span>
		<span class="c">#self.setAvailablePlotTypes()</span>

<div class="viewcode-block" id="plotBasisDims.addPlotRange"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims.addPlotRange">[docs]</a>	<span class="k">def</span> <span class="nf">addPlotRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
		<span class="c">#print self.parentC.nBasis,9999</span>
		<span class="c">#if self.parentC.nBasis == 1:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">basis_opt</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;group&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">:</span> <span class="p">[</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;from&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;limits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)},</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;to&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="n">b</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span> <span class="s">&#39;limits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)},</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;step&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;limits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)},</span>
			<span class="p">]})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span><span class="s">&#39;from&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotRangeFrom</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span><span class="s">&#39;to&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotRangeTo</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span><span class="s">&#39;step&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotRangeStep</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="plotBasisDims.addConcentrateOpt"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims.addConcentrateOpt">[docs]</a>	<span class="k">def</span> <span class="nf">addConcentrateOpt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">concBasisDict</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">basis_opt</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span>
			<span class="n">ConcentrateOpt</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="p">,</span><span class="n">b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">concBasisDict</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;Concentrate-Basis&#39;</span><span class="p">)</span> <span class="p">)</span>
</div>
<div class="viewcode-block" id="plotBasisDims.changePlotRangeFrom"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims.changePlotRangeFrom">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotRangeFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span><span class="s">&#39;from&#39;</span><span class="p">)</span>
				<span class="c">#if not new.valueIsDefault():</span>
				<span class="n">orig</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">new</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="n">orig</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span><span class="n">orig</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span><span class="c">#basis-dim isnt active</span>
				<span class="k">pass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="plotBasisDims.changePlotRangeTo"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims.changePlotRangeTo">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotRangeTo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span><span class="s">&#39;to&#39;</span><span class="p">)</span>
				<span class="c">#if not new.valueIsDefault():</span>
				<span class="n">orig</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">orig</span><span class="o">.</span><span class="n">start</span><span class="p">,</span><span class="n">new</span><span class="o">.</span><span class="n">value</span><span class="p">(),</span><span class="n">orig</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span><span class="c">#basis-dim isnt active</span>
				<span class="k">pass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="plotBasisDims.changePlotRangeStep"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims.changePlotRangeStep">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotRangeStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;Plot-Range&#39;</span><span class="p">,</span><span class="s">&#39;step&#39;</span><span class="p">)</span>
				<span class="c">#if not new.valueIsDefault():</span>
				<span class="n">orig</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">orig</span><span class="o">.</span><span class="n">start</span><span class="p">,</span><span class="n">orig</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span><span class="n">new</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span><span class="c">#basis-dim isnt active</span>
				<span class="k">pass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="plotBasisDims.changePlotStatus"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotBasisDims.changePlotStatus">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
			<span class="n">pa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
			<span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">pa</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="ow">and</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span>
				<span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span><span class="mi">1</span><span class="p">):</span>
				<span class="c">#dont shut down last (active) dimension</span>
				<span class="n">pa</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotStatus</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c">#remove all children</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">basis_opt</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">clearChildren</span><span class="p">()</span>
				<span class="c">#max 2 basis-dim to view</span>
				<span class="k">if</span> <span class="p">(</span>
					<span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="ow">and</span> <span class="n">pa</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">())</span> <span class="ow">or</span>
					<span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)):</span>
					<span class="k">if</span> <span class="ow">not</span> <span class="n">pa</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
						<span class="n">pa</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotStatus</span><span class="p">)</span>
					<span class="c">#print n,self.parentC.show_basis</span>
					<span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">:</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="c">#show_basis has to be sorted</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
						<span class="c">#.parentC.nBasis += 1</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">showTabOnClick</span><span class="p">()</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">addPlotRange</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

					<span class="c">#because &#39;as-time&#39; will only be shown for2+basis-dims</span>
					<span class="c">#it has to be reinitialized</span>
					<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">ba</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
						<span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">:</span> <span class="c"># if concentrated</span>
							<span class="k">if</span> <span class="n">ba</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span><span class="c">#change only other conc. basis</span>
								<span class="bp">self</span><span class="o">.</span><span class="n">concBasisDict</span><span class="p">[</span><span class="n">ba</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">setPAsTime</span><span class="p">()</span>

				<span class="k">else</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">pa</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
						<span class="n">pa</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotStatus</span><span class="p">)</span>
					<span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">:</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
						<span class="c">#self.display.nBasis -= 1</span>
						<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c">#no basis to show</span>
							<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
							<span class="k">break</span><span class="c">#do not create concentrato opts if reset to active basis</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">showTabOnClick</span><span class="p">()</span>
		
					<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;sum&quot;</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">addConcentrateOpt</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scale_plot</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
	
	<span class="c">#def setAvailablePlotTypes(self):</span>
		<span class="c">#self.plot_types.clearChildren()</span>
		<span class="c">##sys.exit()</span>
		<span class="c">##2d-plot</span>
		<span class="c">##if len(self.display.show_basis) == 0:</span>
		<span class="c">##	self.plot_types.addChild({&#39;name&#39;: &#39;Nothing&#39;, &#39;type&#39;: &#39;bool&#39;, &#39;value&#39;: True})</span>
			<span class="c">##sys.exit()</span>
		<span class="c">#if len(self.display.show_basis) == 1:</span>
			<span class="c">#self.linePlot = self.plot_types.addChild({&#39;name&#39;: &#39;Line-Plot&#39;, &#39;type&#39;: &#39;bool&#39;, &#39;value&#39;: True})</span>
			<span class="c">#self.linePlot.sigValueChanged.connect(self.changeLinePlot)</span>
			<span class="c">#self.scatterPlot = self.plot_types.addChild({&#39;name&#39;: &#39;Scatter-Plot&#39;, &#39;type&#39;: &#39;bool&#39;, &#39;value&#39;: False})</span>
			<span class="c">#self.scatterPlot.sigValueChanged.connect(self.changeScatterPlot)</span>
		<span class="c">#elif len(self.display.show_basis) == 2:</span>
			<span class="c">#self.plot_types.addChild({&#39;name&#39;: &#39;3D-Plot&#39;, &#39;type&#39;: &#39;bool&#39;, &#39;value&#39;: True})</span>
			<span class="c">#self.plot_types.addChild({&#39;name&#39;: &#39;Image&#39;, &#39;type&#39;: &#39;bool&#39;, &#39;value&#39;: False})</span>

	<span class="c">#def changeScatterPlot(self):</span>
		<span class="c">#if self.scatterPlot.value():</span>
			<span class="c">#self.display.plot_type = &quot;scatter&quot;</span>
			<span class="c">#self.linePlot.setValue(False, blockSignal=self.changeLinePlot)</span>
		<span class="c">#else:</span>
			<span class="c">#self.display.plot_type = &quot;line&quot;</span>
			<span class="c">#self.linePlot.setValue(True, blockSignal=self.changeLinePlot)</span>
		<span class="c">#self.display.create()</span>

	<span class="c">#def changeLinePlot(self):</span>
		<span class="c">#if self.linePlot.value():</span>
			<span class="c">#self.display.plot_type = &quot;line&quot;</span>
			<span class="c">#self.scatterPlot.setValue(False, blockSignal=self.changeScatterPlot)</span>
		<span class="c">#else:</span>
			<span class="c">#self.display.plot_type = &quot;scatter&quot;</span>
			<span class="c">#self.scatterPlot.setValue(True, blockSignal=self.changeScatterPlot)	</span>
		<span class="c">#self.display.create()</span>
</div></div>
<div class="viewcode-block" id="ConcentrateOpt"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt">[docs]</a><span class="k">class</span> <span class="nc">ConcentrateOpt</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span><span class="n">display</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">concBasisDict</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">basis</span> <span class="o">=</span> <span class="n">b</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">display</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">concBasisDict</span> <span class="o">=</span> <span class="n">concBasisDict</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>

		
		<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;mean&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;sum&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;max&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;min&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;at position&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;limits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="o">.</span><span class="n">resolution</span><span class="o">-</span><span class="mi">1</span><span class="p">)})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;     value&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;readonly&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
		<span class="c">#self.pAsMerge=self.addChild({&#39;name&#39;: &#39;*as merge*&#39;, &#39;type&#39;: &#39;bool&#39;, &#39;value&#39;: False})</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">setPAsTime</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotRangeToPosition</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaSum</span><span class="p">)</span>
		<span class="c">#self.param(&#39;sum&#39;).connect(self.concentrateViaSum)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMin</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMax</span><span class="p">)</span>

		<span class="c">#init default</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">()</span>

<div class="viewcode-block" id="ConcentrateOpt.setPAsTime"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.setPAsTime">[docs]</a>	<span class="k">def</span> <span class="nf">setPAsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
			<span class="c">#does pAsTime exist?</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span> <span class="c"># as standard</span>
			<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span> <span class="c"># no: create it</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;as time&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsTime</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ConcentrateOpt.changeAsTime"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.changeAsTime">[docs]</a>	<span class="k">def</span> <span class="nf">changeAsTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
			<span class="c">#set other options to false/default</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaSum</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMin</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMax</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">setToDefault</span><span class="p">()</span>
			
			<span class="c">#set &#39;as-time&#39; values of the other conc. basis to false</span>
			<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">:</span> <span class="c"># if concentrated</span>
					<span class="k">if</span> <span class="n">b</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">:</span><span class="c">#change only other conc. basis</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">concBasisDict</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
			
			<span class="c">#restore plot range</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;time&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span> <span class="s">&quot;time&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.concentrateViaMean)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">scale_plot</span><span class="o">=</span><span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConcentrateOpt.concentrateViaSum"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.concentrateViaSum">[docs]</a>	<span class="k">def</span> <span class="nf">concentrateViaSum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
			<span class="c">#set other options to false/default</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsTime</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMin</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMax</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">setToDefault</span><span class="p">()</span>
			<span class="c">#restore plot range</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;sum&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span> <span class="s">&quot;sum&quot;</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.concentrateViaMean)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">scale_plot</span><span class="o">=</span><span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="ConcentrateOpt.concentrateViaMean"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.concentrateViaMean">[docs]</a>	<span class="k">def</span> <span class="nf">concentrateViaMean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
			<span class="c">#set other options to false/default</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaSum</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMin</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMax</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">setToDefault</span><span class="p">()</span>
			
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsTime</span><span class="p">)</span>
			<span class="c">#restore plot range</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;mean&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span> <span class="s">&quot;mean&quot;</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.concentrateViaMean)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">scale_plot</span><span class="o">=</span><span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="ConcentrateOpt.concentrateViaMin"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.concentrateViaMin">[docs]</a>	<span class="k">def</span> <span class="nf">concentrateViaMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
			<span class="c">#set other options to false/default</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaSum</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMax</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">setToDefault</span><span class="p">()</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsTime</span><span class="p">)</span>
			<span class="c">#restore plot range</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;min&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span> <span class="s">&quot;min&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.concentrateViaMean)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">scale_plot</span><span class="o">=</span><span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ConcentrateOpt.concentrateViaMax"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.concentrateViaMax">[docs]</a>	<span class="k">def</span> <span class="nf">concentrateViaMax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
			<span class="c">#set other options to false/default</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaSum</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMin</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">setToDefault</span><span class="p">()</span>
			
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsTime</span><span class="p">)</span>
			<span class="c">#restore plot range</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;max&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span> <span class="s">&quot;max&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.concentrateViaMean)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">scale_plot</span><span class="o">=</span><span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="ConcentrateOpt.changePlotRangeToPosition"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.ConcentrateOpt.changePlotRangeToPosition">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotRangeToPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#for n,b in enumerate(self.display._basis_dim):</span>
		<span class="c">#	if not self.param(b.name).value():</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">valueIsDefault</span><span class="p">():</span>
			<span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pAtPosition</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
			<span class="c">#get value for position</span>
			<span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basisMatrix</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">][</span><span class="n">position</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pValue</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
			<span class="c">#set other options to false</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pSum</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaSum</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMean</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMin</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">concentrateViaMax</span><span class="p">)</span>

			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsTime</span><span class="p">)</span>

			<span class="c">#set plot range</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basis_dim_plot_range</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">concentrate_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;pos&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">%.3f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">value</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span><span class="c">#position is default &quot;-1&quot;</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">pValue</span><span class="o">.</span><span class="n">setToDefault</span><span class="p">()</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">basis</span><span class="p">)</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">pMean</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.concentrateViaMean)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scale_plot</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="sliceImage"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.sliceImage">[docs]</a><span class="k">class</span> <span class="nc">sliceImage</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefTab</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span>
		<span class="c">#self.parentC = parentC</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">display</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span> <span class="o">=</span> <span class="n">prefTab</span>

		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bool&#39;</span>

		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">activate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;activate&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;tip&#39;</span><span class="p">:</span> <span class="s">&quot;activate to slice an image - this only works for 2+ active basisDimensions&quot;</span><span class="p">})</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeActivate</span><span class="p">)</span>
	
<div class="viewcode-block" id="sliceImage.changeActivate"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.sliceImage.changeActivate">[docs]</a>	<span class="k">def</span> <span class="nf">changeActivate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">errorMsg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Error&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&quot;Need at least two active basisDimensions&quot;</span><span class="p">})</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">av_displays</span><span class="o">=</span> <span class="p">[</span><span class="s">&quot;-&quot;</span><span class="p">]</span>
				<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
					<span class="c">#exclude own display-pref-tab</span>
					<span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
						<span class="n">av_displays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">)</span>
				<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">av_displays</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">which_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Error:&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&quot;Add another widget!&quot;</span><span class="p">})</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="c">#value=&quot;-&quot;</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">which_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;slice to display&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;values&#39;</span><span class="p">:</span> <span class="n">av_displays</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="n">av_displays</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">which_display</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeWhichDisplay</span><span class="p">)</span>

				<span class="c">#self.which_display = self.addChild(chooseWhichDisplay(self, self.display,self.prefTab.prefDock.tab, name=&quot;slice to display&quot;) )</span>
			
		<span class="k">else</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errorMsg</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
				<span class="k">pass</span> <span class="c"># no eror msg to delete</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">which_display</span><span class="p">)</span>
				<span class="c">#when i&#39;m the master_display</span>
				<span class="c">#try: #deslave slave_display</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">save_restore</span><span class="o">.</span><span class="n">restorePreferences</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">slice_image</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">slice_image</span><span class="o">.</span><span class="n">pSlave</span><span class="p">)</span>
				<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
					<span class="k">pass</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
				<span class="c">#cant remove this child, because it does not exist</span>
				<span class="c">#this child dont exist because this display is the slice-output(chosendisplay)</span>
				<span class="c">##when i&#39;m slave_display:</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pSlave</span><span class="p">)</span>
				<span class="c">#show all hidden preferences</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">save_restore</span><span class="o">.</span><span class="n">restorePreferences</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
				<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
					<span class="k">pass</span>

			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">lineRoi</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
				<span class="k">pass</span> <span class="c"># no roi-line generated so far</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
				<span class="k">pass</span> <span class="c"># no display chosen, so no basis-dimto choose</span>
				
			<span class="k">try</span><span class="p">:</span> <span class="c">#unblock &#39;conentrate-opt&#39; of last sliceBasis</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">recentSliceBasis</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span> <span class="c">#no last parameter exist</span>
				<span class="k">pass</span>
</div>
<div class="viewcode-block" id="sliceImage.changeWhichDisplay"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.sliceImage.changeWhichDisplay">[docs]</a>	<span class="k">def</span> <span class="nf">changeWhichDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#if a display was chosen</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">which_display</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">which_display</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">():</span>
			<span class="c">#get tab-index from tab-text</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span> <span class="o">=</span> <span class="bp">None</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
			
				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">which_display</span><span class="o">.</span><span class="n">value</span><span class="p">()):</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">prefDock</span><span class="o">.</span><span class="n">tab</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">display</span>
					<span class="k">break</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
				<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s">&quot;ERRORsearchcode 23675367&quot;</span><span class="p">)</span>
			

			<span class="c">#transfer the parameter-state from active (master)preference tab to</span>
			<span class="c"># preference tab of the chosen display (slave)</span>
			<span class="n">masterState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">saveState</span><span class="p">()</span>
			<span class="n">slaveState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">saveState</span><span class="p">()</span>
			<span class="n">slaveState</span> <span class="o">=</span> <span class="n">_utils</span><span class="o">.</span><span class="n">adaptMasterStaticsToSlaveDict</span><span class="p">(</span><span class="n">masterState</span><span class="p">,</span><span class="n">slaveState</span><span class="p">)</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">save_restore</span><span class="o">.</span><span class="n">restorePreferences</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="n">slaveState</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
			<span class="c">#save last preferences (to restore, when slave_display is not a slave of self.display)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">save_restore</span><span class="o">.</span><span class="n">savePreferences</span><span class="p">()</span>
			
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">slice_image</span><span class="o">.</span><span class="n">pSlave</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">slice_image</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;SLAVE OF Widget&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">index</span><span class="p">),</span><span class="s">&#39;readonly&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
			<span class="c">#hide activate-button - slave can only be unslaved via master</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">slice_image</span><span class="o">.</span><span class="n">activate</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
			<span class="c">#self.slave_display.prefTab.slice_image.activate.setValue(&quot;True&quot;, blockSignal=self.slave_display.prefTab.slice_image.changeActivate)</span>


			<span class="c">#hide all options which a slave mustn&#39;t handle</span>
			<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span>  <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">plot_basis_dims</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">plot_basis_dims</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">())</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
			<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span>  <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">plot_merge_dims</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">plot_merge_dims</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">())</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
			<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span>  <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">save_restore</span><span class="o">.</span><span class="n">children</span><span class="p">():</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">param</span><span class="p">(</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">save_restore</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">())</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>


			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
				<span class="k">pass</span> <span class="c"># no chooseWhichConcBasis-instance to remove</span>

			<span class="c">#generate a which-basis list containing all concentrated basis-dims</span>
			<span class="n">show_basis</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;-&quot;</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">basis_name_index</span><span class="o">=</span><span class="p">{}</span>
			<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">:</span>
					<span class="n">show_basis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">basis_name_index</span><span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">=</span> <span class="n">i</span>
			<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Error:&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&quot;No conc. basisDim to show!&quot;</span><span class="p">})</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="c">#value=&quot;-&quot;</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;show conc. basis&quot;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span> <span class="s">&#39;values&#39;</span><span class="p">:</span> <span class="n">show_basis</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>

				<span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeWhichBasis</span><span class="p">)</span>





</div>
<div class="viewcode-block" id="sliceImage.changeWhichBasis"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.sliceImage.changeWhichBasis">[docs]</a>	<span class="k">def</span> <span class="nf">changeWhichBasis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#if basis-dim was chosen</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">():</span>

			<span class="c">##add slice-ROI:</span>
			<span class="n">thirdLenX</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basisMatrix</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">/</span><span class="mi">3</span> <span class="p">)</span>
			<span class="n">halfLenY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basisMatrix</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span><span class="o">/</span><span class="mi">2</span> <span class="p">)</span>
	
			<span class="n">startX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basisMatrix</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">thirdLenX</span><span class="p">]</span>
			<span class="n">startY</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basisMatrix</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">halfLenY</span><span class="p">]</span>
			<span class="n">stopX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">basisMatrix</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="o">-</span><span class="n">thirdLenX</span><span class="p">]</span>
			<span class="n">stopY</span> <span class="o">=</span> <span class="n">startY</span><span class="c">#self.display.basisMatrix[self.display.show_basis[1]][-thirdLenY]</span>
			
			<span class="c">#only draw one line - so remove old ones</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">lineRoi</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
				<span class="k">pass</span> <span class="c"># no line to remove</span>
			<span class="c">#new roi-line</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">lineRoi</span> <span class="o">=</span> <span class="n">LineSegmentROI</span><span class="p">([[</span><span class="n">startX</span><span class="p">,</span> <span class="n">startY</span><span class="p">],</span> <span class="p">[</span><span class="n">stopX</span><span class="p">,</span><span class="n">stopY</span><span class="p">]],</span> <span class="n">pen</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
			<span class="c">#add new roi-line to plot</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">lineRoi</span><span class="p">)</span>


			<span class="c">#set chosen concentrated basis to concentrateOption: &#39;as time&#39;</span>
			<span class="c"># thats necassary go get a slice-able-3d-array</span>
			<span class="k">try</span><span class="p">:</span> <span class="c">#unblock &#39;conentrate-opt&#39; of last sliceBasis</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">recentSliceBasis</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span> <span class="c">#no last parameter exist</span>
				<span class="k">pass</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">recentSliceBasis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span><span class="o">.</span><span class="n">plot_basis_dims</span><span class="o">.</span><span class="n">concBasisDict</span><span class="p">[</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="o">.</span><span class="n">value</span><span class="p">()]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">recentSliceBasis</span><span class="o">.</span><span class="n">pAsTime</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">recentSliceBasis</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>


			<span class="c">#y-axis becoms the new appeared-basis-axis</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">basis_name_index</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="o">.</span><span class="n">value</span><span class="p">()]</span>
			<span class="n">shown_basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_setAxisLabels</span><span class="p">()</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">firstAutoRange</span> <span class="o">=</span> <span class="bp">True</span>



			<span class="k">def</span> <span class="nf">updateROIline</span><span class="p">():</span>
				<span class="n">slicedImg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">lineRoi</span><span class="o">.</span><span class="n">getArrayRegion</span><span class="p">(</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">merge_extract</span><span class="p">,</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">imageItem</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>

				<span class="n">y0</span><span class="o">=</span><span class="mi">0</span>
				<span class="n">yscale</span><span class="o">=</span><span class="mi">1</span> <span class="c"># doesn&#39;t matter because yAxis wont be shown</span>
				<span class="n">x0</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">[</span><span class="n">shown_basis</span><span class="p">]</span><span class="o">.</span><span class="n">_include_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
				<span class="n">x1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">[</span><span class="n">shown_basis</span><span class="p">]</span><span class="o">.</span><span class="n">_include_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
				
				<span class="n">xscale</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">[</span><span class="n">shown_basis</span><span class="p">]</span><span class="o">.</span><span class="n">resolution</span>
				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">transpose_axes</span><span class="p">:</span>
					<span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="n">x0</span><span class="p">]</span>
					<span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">yscale</span><span class="p">,</span> <span class="n">xscale</span><span class="p">]</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="s">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">p</span> <span class="o">=</span><span class="p">[</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">]</span>
					<span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span><span class="p">]</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="s">&quot;left&quot;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>



				<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">slicedImg</span><span class="p">,</span> <span class="n">autoRange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstAutoRange</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">p</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">firstAutoRange</span> <span class="o">=</span> <span class="bp">False</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">lineRoi</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">updateROIline</span><span class="p">)</span>

			<span class="c">#copy title from masterdisplay</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">title_opt</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">title_opt</span><span class="p">)</span>
			<span class="c">#change title</span>
			<span class="n">appear_basis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">[</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">basis_name_index</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">which_basis</span><span class="o">.</span><span class="n">value</span><span class="p">()]]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span><span class="n">appear_basis</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="s">&quot;slice&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">slave_display</span><span class="o">.</span><span class="n">_changeTitleOpt</span><span class="p">(</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_basis_dim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span><span class="s">&quot;slice&quot;</span><span class="p">)</span>

			<span class="n">updateROIline</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="plotMergeDims"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotMergeDims">[docs]</a><span class="k">class</span> <span class="nc">plotMergeDims</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefTab</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span>
		<span class="c">#self.parentC = parentC</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">display</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span> <span class="o">=</span> <span class="n">prefTab</span>

		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bool&#39;</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
		<span class="c">#self.basis_opt = []</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">mergeToPlot</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">asDensity</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_merge_dim</span><span class="p">):</span>
			<span class="n">is_merge_in_view</span> <span class="o">=</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span>
			<span class="c">#is_merge_in_view = self.parentC.</span>
			<span class="c">#plot_basis = b._basisIndex in self.parentC.show_basis</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">mergeToPlot</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="n">is_merge_in_view</span><span class="p">}))</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotMerge</span><span class="p">)</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">asDensity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mergeToPlot</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;as density&quot;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span><span class="s">&#39;enabled&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">}))</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">asDensity</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAsDensity</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">changePlotMerge</span><span class="p">()</span>

<div class="viewcode-block" id="plotMergeDims.changePlotMerge"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotMergeDims.changePlotMerge">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotMerge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span> <span class="ow">in</span>  <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mergeToPlot</span><span class="p">):</span>
			<span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
				<span class="c">#show_density = False</span>
				<span class="c">#if not m.hasChildren():</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">asDensity</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
				<span class="c">#else:</span>
				<span class="c">#	self.asDensity[n].hide()</span>


				<span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="p">:</span>
					<span class="c">#deactivate all other merges in case of imagePlot</span>
					<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
						<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="p">:</span>
							<span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
								<span class="bp">self</span><span class="o">.</span><span class="n">mergeToPlot</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="n">blockSignal</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotMerge</span><span class="p">)</span>
								<span class="bp">self</span><span class="o">.</span><span class="n">asDensity</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
								<span class="c">#self.mergeToPlot[j].clearChildren()</span>
								<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

			<span class="k">if</span> <span class="ow">not</span> <span class="n">m</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
				<span class="c">#if m.hasChildren():</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">asDensity</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
				<span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="p">:</span>
					<span class="c">#dont remove the last shown merge</span>
					<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
						<span class="n">m</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="c">#, blockSignal=self.changePlotMerge)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
							<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
		<span class="c">#self.display.create()</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_basis</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_createCurves1D</span><span class="p">()</span>
		<span class="c">#self.prefTab.showTabOnClick()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_setTitle</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="plotMergeDims.changeAsDensity"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.plotMergeDims.changeAsDensity">[docs]</a>	<span class="k">def</span> <span class="nf">changeAsDensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span> <span class="ow">in</span>  <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_merge_dim</span><span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">show_as_density</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;as density&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">show_merge_as_density</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">show_as_density</span>
				<span class="k">if</span> <span class="n">show_as_density</span><span class="p">:</span>
					<span class="n">m</span><span class="o">.</span><span class="n">use_unit</span> <span class="o">=</span> <span class="s">&quot;PointDensity&quot;</span>
					<span class="c">#self.display.title_additive.append(&quot;PointDensity&quot;)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">m</span><span class="o">.</span><span class="n">use_unit</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">unit</span>
					<span class="c">#i=self.display.title_additive.index(&quot;PointDensity&quot;)</span>
					<span class="c">#self.display.title_additive.pop(i)</span>
			<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span><span class="c">#merge not in show_merge</span>
				<span class="k">pass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_setTitle</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_setAxisLabels</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div></div>
<div class="viewcode-block" id="viewOptions"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions">[docs]</a><span class="k">class</span> <span class="nc">viewOptions</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefTab</span><span class="p">,</span> <span class="n">display</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span>
		<span class="c">#self.parentC = parentC</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">display</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">prefTab</span> <span class="o">=</span> <span class="n">prefTab</span>

		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bool&#39;</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lockAspect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;lockAspect&quot;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;Crosshair&quot;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotOverlay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&quot;PlotOverlay&quot;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">})</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">transposeAxes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;transpose Axes&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
		<span class="c">#if len(self.display.show_basis) == 1:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">autoRangeX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;autoRange X&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">autoRangeY</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;autoRange Y&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">plotOverlay</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changePlotOverlay</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">transposeAxes</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeTransposeAxes</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lockAspect</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeLockAspect</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">autoRangeX</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAutoRangeX</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">autoRangeY</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeAutoRangeY</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeCrosshair</span><span class="p">)</span>

<div class="viewcode-block" id="viewOptions.changeCrosshair"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions.changeCrosshair">[docs]</a>	<span class="k">def</span> <span class="nf">changeCrosshair</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosshair</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_setCrosshair</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_unsetCrosshair</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="viewOptions.changeTransposeAxes"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions.changeTransposeAxes">[docs]</a>	<span class="k">def</span> <span class="nf">changeTransposeAxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="c">#self.display._mirrowAxisLabels()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">transpose_axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transposeAxes</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scale_plot</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">_setAxisLabels</span><span class="p">()</span>

		<span class="c">#for n,b in enumerate(self.display._basis_dim):</span>
			<span class="c">#try:</span>
				<span class="c">#if self.transposeAxes.value() == True:</span>
					<span class="c">#self.display.transpose_axes = True</span>
					<span class="c">#if len(self.display.show_basis) == 1:</span>
						<span class="c">#self.display._mirrowAxisLabels1D()</span>
					<span class="c">#else:</span>
						<span class="c">#self.display._mirrowAxisLabels2D()</span>
				<span class="c">#else:</span>
					<span class="c">#self.display.transpose_axes = False</span>
					<span class="c">#if len(self.display.show_basis) == 1:</span>
						<span class="c">#self.display._restoreAxisLabels1D()</span>
					<span class="c">#else:</span>
						<span class="c">#self.display._restoreAxisLabels2D()</span>
			<span class="c">#except Exception:#basis-dim isnt active</span>
				<span class="c">#pass</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="viewOptions.changePlotOverlay"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions.changePlotOverlay">[docs]</a>	<span class="k">def</span> <span class="nf">changePlotOverlay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotOverlay</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">addPlotOverlay</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">removePlotOverlay</span><span class="p">()</span>
		<span class="c">#	self.display.enableAutoRangeX = False</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="viewOptions.changeAutoRangeX"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions.changeAutoRangeX">[docs]</a>	<span class="k">def</span> <span class="nf">changeAutoRangeX</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeX</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">enableAutoRangeX</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">enableAutoRangeX</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="viewOptions.changeAutoRangeY"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions.changeAutoRangeY">[docs]</a>	<span class="k">def</span> <span class="nf">changeAutoRangeY</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeY</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">enableAutoRangeY</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">enableAutoRangeY</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="viewOptions.changeLockAspect"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.viewOptions.changeLockAspect">[docs]</a>	<span class="k">def</span> <span class="nf">changeLockAspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockAspect</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setAspectLocked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setAspectLocked</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">scale_plot</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>


</div></div>
<div class="viewcode-block" id="readoutPlotRates"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.readoutPlotRates">[docs]</a><span class="k">class</span> <span class="nc">readoutPlotRates</span><span class="p">(</span><span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="p">):</span>
	
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parentC</span><span class="p">,</span><span class="o">**</span><span class="n">opts</span><span class="p">):</span><span class="c">#</span>
		<span class="c">#self.parentC = parentC</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parentC</span> <span class="o">=</span> <span class="n">parentC</span>
		
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bool&#39;</span>
		<span class="n">opts</span><span class="p">[</span><span class="s">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">pTypes</span><span class="o">.</span><span class="n">GroupParameter</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
		<span class="c">#self.merge_opt = []</span>
		<span class="c">#mergeTogether(name=&#39;Together&#39;)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">paramFPS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Plot frames per second&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">fps</span><span class="p">,</span> <span class="s">&#39;limits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">200</span><span class="p">)})</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">paramLimitLPS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Limit readout-rate&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">limitReadoutRate</span><span class="p">}</span>
			<span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">changeLimitReadoutRate</span><span class="p">()</span>
		
		<span class="bp">self</span><span class="o">.</span><span class="n">readoutEveryNLine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span>
			<span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Readout every n line (+-)&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">matrixClass</span><span class="o">.</span><span class="n">_getReadoutEveryNLine</span><span class="p">()})</span>
		
		<span class="bp">self</span><span class="o">.</span><span class="n">paramFPS</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeFPS</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">paramLimitLPS</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeLimitReadoutRate</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">readoutEveryNLine</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeReadoutEveryNLine</span><span class="p">)</span>

<div class="viewcode-block" id="readoutPlotRates.changeFPS"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.readoutPlotRates.changeFPS">[docs]</a>	<span class="k">def</span> <span class="nf">changeFPS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">_setFPS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paramFPS</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
	</div>
<div class="viewcode-block" id="readoutPlotRates.changeLimitReadoutRate"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.readoutPlotRates.changeLimitReadoutRate">[docs]</a>	<span class="k">def</span> <span class="nf">changeLimitReadoutRate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">limitReadoutRate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paramLimitLPS</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">paramLimitLPS</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
			
			<span class="bp">self</span><span class="o">.</span><span class="n">paramLPS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paramLimitLPS</span><span class="o">.</span><span class="n">addChild</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;lines per second&#39;</span><span class="p">,</span> <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">lps</span><span class="p">,</span> <span class="s">&#39;limits&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)})</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">paramLPS</span><span class="o">.</span><span class="n">sigValueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeLPS</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">changeLPS</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">changeLPS</span><span class="p">()</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">paramLimitLPS</span><span class="o">.</span><span class="n">removeChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paramLPS</span><span class="p">)</span>
			<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span><span class="c">#paramLPS not defined yet</span>
				<span class="k">pass</span>
			</div>
<div class="viewcode-block" id="readoutPlotRates.changeLPS"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.readoutPlotRates.changeLPS">[docs]</a>	<span class="k">def</span> <span class="nf">changeLPS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">_setLPS</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">paramLPS</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span><span class="c">#paramLPS not defined jet</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">_setLPS</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
			</div>
<div class="viewcode-block" id="readoutPlotRates.changeReadoutEveryNLine"><a class="viewcode-back" href="../../../plot.html#diaGrabber.plot._preferenceDock.readoutPlotRates.changeReadoutEveryNLine">[docs]</a>	<span class="k">def</span> <span class="nf">changeReadoutEveryNLine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">parentC</span><span class="o">.</span><span class="n">matrixClass</span><span class="o">.</span><span class="n">_setReadoutEveryNLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">readoutEveryNLine</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>
</pre></div></div></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">diaGrabber 0.1.1 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../../diaGrabber.html" >diaGrabber</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Karl Bedrich.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>